<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ZEPHENHEL CITADEL</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="brand-badge">Z</div>
        <div class="brand-text">
          <h1>ZEPHENHEL CITADEL</h1>
          <p>Mythic tri-chain splitter • BSC • Ethereum • Polygon <span class="fee-note">• fee: 1% (in contract)</span></p>
        </div>
      </div>

      <div class="pills">
        <span class="pill net" id="pillNet">Network: —</span>
        <span class="pill wallet" id="pillWallet">Wallet: disconnected</span>
        <button class="btn gold" id="btnConnect">Connect</button>
        <button class="btn ghost" id="btnSwitch">Switch Network</button>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="hud">
      <div class="hud-line"></div>
      <div class="hud-line"></div>
      <div class="hud-line"></div>
    </div>

    <div class="grid">
      <!-- LEFT: Split -->
      <section class="card">
        <div class="card-title">
          <h2>Split Command</h2>
          <span class="chip">ERC20</span>
        </div>

        <div class="label">Active splitter (auto by network)</div>
        <input id="splitterAddr" readonly />

        <div class="hr"></div>

        <div class="label">Token contract (ERC20)</div>
        <input id="tokenAddr" placeholder="0x..." autocomplete="off" spellcheck="false" />
        <div class="small">Tip: make sure you’re using the correct USDC address for that chain.</div>

        <div class="hr"></div>

        <div class="row2">
          <div>
            <div class="label">Amount (token units)</div>
            <input id="amount" placeholder="e.g. 1.5" inputmode="decimal" />
            <div class="small">No native splits in this build (token-only).</div>
          </div>
          <div class="sidebox">
            <div class="sidebox-title">USD estimate</div>
            <div class="sidebox-big" id="usdEstimate">$—</div>
            <div class="sidebox-sub">Fee handled by contract</div>
          </div>
        </div>

        <div class="hr"></div>

        <div class="card-title">
          <h2>Recipients</h2>
          <div class="right-tools">
            <span class="pill mini" id="totalPill">Total: 0%</span>
            <button class="btn ghost mini-btn" id="btnAdd">+ Add</button>
            <button class="btn ghost mini-btn" id="btnNormalize">Normalize</button>
          </div>
        </div>

        <div id="recipients"></div>

        <div class="actions">
          <button class="btn ghost" id="btnApprove">Approve</button>
          <button class="btn gold" id="btnExecute">Execute Split</button>
        </div>

        <div class="notice" id="tipBox">
          Enter simple percent shares (like 50/50). Citadel will auto-detect whether your splitter expects 100 or 10,000 and which function signature it uses.
        </div>

        <div class="error" id="errBox" style="display:none"></div>
        <div class="footer-note">Always test small amounts first.</div>
      </section>

      <!-- RIGHT: Telemetry -->
      <aside class="card">
        <div class="card-title">
          <h2>Live Telemetry</h2>
          <div class="right-tools">
            <label class="toggle">
              <input type="checkbox" id="soundToggle" checked />
              <span>Sound FX</span>
            </label>
            <button class="btn ghost mini-btn" id="btnClearLog">Clear</button>
            <button class="btn ghost mini-btn" id="btnRefresh">Refresh</button>
          </div>
        </div>

        <div class="tele-grid">
          <div class="tele-card">
            <div class="tele-k">Native balance</div>
            <div class="tele-v" id="nativeBal">—</div>
          </div>
          <div class="tele-card">
            <div class="tele-k">Token symbol</div>
            <div class="tele-v" id="tokenSym">—</div>
          </div>
          <div class="tele-card">
            <div class="tele-k">Token decimals</div>
            <div class="tele-v" id="tokenDec">—</div>
          </div>
          <div class="tele-card">
            <div class="tele-k">Token balance</div>
            <div class="tele-v" id="tokenBal">—</div>
          </div>
          <div class="tele-card">
            <div class="tele-k">Allowance → splitter</div>
            <div class="tele-v" id="allowance">—</div>
          </div>
          <div class="tele-card">
            <div class="tele-k">Detected mode</div>
            <div class="tele-v" id="detectedMode">—</div>
          </div>
        </div>

        <div class="hr"></div>

        <div class="log" id="log"></div>
      </aside>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="./app.js"></script>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ZEPHENHEL CITADEL</title>
  <link rel="stylesheet" href="./styles.css"/>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>

<header class="topbar">
  <div class="topbar-inner">
    <div class="brand">
      <div class="brand-badge">Z</div>
      <div class="brand-text">
        <h1>ZEPHENHEL CITADEL</h1>
        <p>Tri-chain Split Console • BSC • Ethereum • Polygon</p>
      </div>
    </div>

    <div class="pills">
      <div class="pill net" id="pillNet">Network: —</div>
      <div class="pill wallet" id="pillWallet">Wallet: Disconnected</div>

      <button class="btn ghost" id="btnSwitch" type="button">Switch</button>
      <button class="btn gold" id="btnConnect" type="button">Connect</button>
    </div>
  </div>
</header>

<main class="container">
  <div class="grid">

    <!-- LEFT -->
    <section class="card">
      <div class="card-title">
        <h2>Split Command</h2>
        <span class="tag">ZephFlexSplitter</span>
      </div>

      <div class="label">Chain</div>
      <select id="selChain">
        <option value="bsc">BSC Mainnet</option>
        <option value="eth">Ethereum Mainnet</option>
        <option value="polygon">Polygon Mainnet</option>
      </select>

      <div class="hr"></div>

      <div class="label">Token address (ERC20 / BEP20)</div>
      <input id="inpToken" placeholder="0x…" spellcheck="false"/>

      <div class="row2">
        <div>
          <div class="label">Amount</div>
          <input id="inpAmount" placeholder="1.0" inputmode="decimal"/>
          <div class="small">Approve → Execute. Fee is handled inside your splitter contract.</div>
        </div>

        <div class="miniCard">
          <div class="miniTitle">Active Spender</div>
          <div class="miniValue mono" id="spendAddr">—</div>
          <div class="miniSub">This must match your chain’s splitter.</div>
        </div>
      </div>

      <div class="hr"></div>

      <div class="card-title">
        <h2>Recipients</h2>
        <div class="inlineBtns">
          <span class="pill" id="totalPill">Total: 0</span>
          <button class="btn ghost" id="btnNormalize" type="button">Normalize</button>
          <button class="btn ghost" id="btnAdd" type="button">+ Add</button>
        </div>
      </div>

      <div id="recipients"></div>

      <div class="btnRow">
        <button class="btn ghost" id="btnApprove" type="button">Approve</button>
        <button class="btn gold" id="btnExecute" type="button">Execute Split</button>
      </div>

      <div class="notice">
        Tip: If a token refuses approve, try “Approve” again (some require reset-to-0 first, we handle that automatically).
      </div>

      <div class="error" id="errBox" style="display:none;"></div>
      <div class="footer-note">Public launch build • Test small first</div>
    </section>

    <!-- RIGHT -->
    <section class="card">
      <div class="card-title">
        <h2>Telemetry</h2>
        <span class="tag">Live</span>
      </div>

      <div class="teleGrid">
        <div class="teleBox">
          <div class="teleK">Native balance</div>
          <div class="teleV" id="teleNative">—</div>
        </div>

        <div class="teleBox">
          <div class="teleK">Token</div>
          <div class="teleV" id="teleSymbol">—</div>
        </div>

        <div class="teleBox">
          <div class="teleK">Decimals</div>
          <div class="teleV" id="teleDecimals">—</div>
        </div>

        <div class="teleBox">
          <div class="teleK">Token balance</div>
          <div class="teleV" id="teleTokenBal">—</div>
        </div>

        <div class="teleBox">
          <div class="teleK">Allowance → splitter</div>
          <div class="teleV" id="teleAllowance">—</div>
        </div>

        <div class="teleBox">
          <div class="teleK">Active splitter</div>
          <div class="teleV mono" id="teleSplitter">—</div>
        </div>

        <div class="teleBox" style="grid-column:1 / -1;">
          <div class="teleK">Status</div>
          <div class="teleV" id="teleStatus">Booting…</div>
        </div>
      </div>

      <div class="hr"></div>

      <div class="card-title">
        <h2>Runtime Log</h2>
        <div class="inlineBtns">
          <button class="btn ghost" id="btnRefresh" type="button">Refresh</button>
          <button class="btn ghost" id="btnClear" type="button">Clear</button>
        </div>
      </div>

      <pre class="log" id="log"></pre>
    </section>

  </div>
</main>

<script src="./app.js"></script>
</body>
</html>

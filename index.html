<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ZEPHENHEL CITADEL</title>

  <link rel="stylesheet" href="./styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>

<header class="topbar">
  <div class="topbar-inner">
    <div class="brand">
      <div class="brand-badge">Z</div>
      <div class="brand-text">
        <h1>ZEPHENHEL CITADEL</h1>
        <p>Tri-chain token splitter • BSC • Ethereum • Polygon</p>
      </div>
    </div>

    <div class="pills">
      <div class="pill net" id="pillNet">Network: —</div>
      <div class="pill wallet" id="pillWallet">Wallet: Disconnected</div>

      <button class="btn ghost" id="btnSwitch">Switch Network</button>
      <button class="btn gold" id="btnConnect">Connect</button>

      <label class="pill" style="display:flex;gap:8px;align-items:center;">
        <input type="checkbox" id="chkOperator" />
        <span>Operator Console</span>
      </label>
    </div>
  </div>
</header>

<main class="container">
  <div class="grid">

    <!-- LEFT: SPLIT COMMAND -->
    <section class="card">
      <div class="card-title">
        <h2>Split Command</h2>
        <div class="badge">Splitter</div>
      </div>

      <div class="label">Chain</div>
      <select id="selChain">
        <option value="bsc">BNB Chain (BSC)</option>
        <option value="eth">Ethereum</option>
        <option value="polygon">Polygon</option>
      </select>

      <div class="hr"></div>

      <div class="label">Token address (ERC20 / BEP20)</div>
      <input id="inpToken" placeholder="0x…" spellcheck="false" />

      <div class="label">Amount</div>
      <input id="inpAmount" placeholder="0.10" inputmode="decimal" />

      <div class="row-actions" style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:10px;">
        <label class="pill" style="display:flex;gap:8px;align-items:center;">
          <input type="checkbox" id="chkApproveMax" />
          <span>Approve MAX</span>
        </label>
        <div class="notice" style="margin:0;">
          Platform fee is handled by the contract (<span class="feeTiny">1%</span>).
        </div>
      </div>

      <div class="hr"></div>

      <div class="card-title" style="margin-bottom:6px;">
        <h2>Recipients</h2>
        <div class="inlineBtns" style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
          <div class="pill" id="totalPill">Total weight: —</div>
          <button class="btn ghost" id="btnAdd">+ Add</button>
        </div>
      </div>

      <div class="small">
        Enter any positive weights (ex: 50 / 50 or 70 / 20 / 10). They don’t need to sum to 100.
      </div>

      <div class="hr"></div>

      <div id="recipients"></div>

      <div class="btnRow" style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
        <button class="btn ghost" id="btnApprove">Approve</button>
        <button class="btn gold" id="btnExecute">Execute Split</button>
      </div>

      <div class="error" id="errBox" style="display:none;margin-top:10px;"></div>

      <div class="footer-note">Always test small amounts first.</div>
    </section>

    <!-- RIGHT: OPERATOR CONSOLE (hidden by default) -->
    <section class="card" id="operatorPanel" style="display:none;">
      <div class="card-title">
        <h2>Operator Console</h2>
        <div class="inlineBtns" style="display:flex;gap:8px;">
          <button class="btn ghost" id="btnRefresh">Refresh</button>
          <button class="btn ghost" id="btnClear">Clear Log</button>
        </div>
      </div>

      <div class="tele">
        <div class="small">Native balance: <span id="teleNative">—</span></div>
        <div class="small">Token symbol: <span id="teleSymbol">—</span></div>
        <div class="small">Decimals: <span id="teleDecimals">—</span></div>
        <div class="small">Token balance: <span id="teleTokenBal">—</span></div>
        <div class="small">Allowance → splitter: <span id="teleAllowance">—</span></div>
        <div class="small">Active splitter: <span id="teleSplitter">—</span></div>
        <div class="small">Status: <span id="teleStatus">Ready</span></div>
      </div>

      <div class="hr"></div>

      <div class="card-title" style="margin-bottom:6px;">
        <h2>Runtime Log</h2>
      </div>
      <pre class="log" id="log"></pre>

      <div class="footer-note">Operator console is for debugging + proof.</div>
    </section>

  </div>
</main>

<script src="./app.js"></script>
</body>
</html>
